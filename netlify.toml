[build]
  command = "npm run build"
  publish = "dist"
  functions = "netlify/functions"

[build.environment]
  NODE_VERSION = "18"

# CRITICAL: Exclude Netlify functions from SPA redirect
# This MUST come BEFORE the catch-all SPA redirect
[[redirects]]
  from = "/.netlify/functions/*"
  to = "/.netlify/functions/:splat"
  status = 200

# Handle SPA routing for frontend
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

# Environment variables (set in Netlify dashboard, not here)
# Required:
#   - VITE_GEMINI_API_KEY
#   - VITE_IMAGEN_API_KEY  
#   - VITE_VEO_API_KEY
#   - GOOGLE_CLOUD_PROJECT_ID (for serverless function)
#   - GOOGLE_SERVICE_ACCOUNT_KEY (for serverless function - JSON service account key)

